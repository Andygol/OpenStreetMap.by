
<html> 
<head> 
<title>OpenStreetMap.by - embeddable map</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
 
<link rel="stylesheet" href="/js/leaflet/leaflet.css" /> 
<!--[if lte IE 8]><link rel="stylesheet" href="/js/leaflet/leaflet.ie.css" /><![endif]--> 
<script src="/js/leaflet/leaflet.js"></script> 
 
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script> 
<script src="/js/crosshair.js"></script> 

<script type="text/javascript"> 
var mmap; 
var auto_layer; 
var auto_active=true; 
var json_in_progress = false; 
</script> 
</head> 
 
<body marginheight="0" marginwidth="0"> 
<div id="map" style="width: 100%; height: 100%; padding:0; spacing:0"></div> 
<script><!-- 

    params = {};
    var idx = window.location.href.indexOf('?');
    
    if (idx >= 0) {
      params = window.location.href.slice(idx + 1).split('&');
      for(var i = 0; i < params.length; i++) {
        var tmp = decodeURIComponent((params[i] + '').replace(/\+/g, '%20')).split('=');
        params[tmp[0]] = tmp[1];
      }
    }
    // parsing, adding defaults
    params.lat        = parseFloat(params.lat)  || 53.9142;
    params.lon        = parseFloat(params.lon)  || 27.5955;
    params.zoom       = parseFloat(params.zoom) || 11;
    params.lang       = params.lang             || 'be'; // TODO: autodetect browser
    params.crosshair  = params.crosshair        || false;
    params.marker     = params.marker=='true';
    params.mlat       = parseFloat(params.mlat) || params.lat;
    params.mlon       = parseFloat(params.mlon) || params.lon;
    params.markertext = params.markertext       || '';
    
    params.zoomcontrol= !(params.zoomcontrol=='false');


    // fixing
    if ((params.lang != 'en') &&
        (params.lang != 'ru') &&
        (params.lang != 'be'))
      params.lang = 'be';

    // configuring map
    if (params.lang == 'ru'){
      var kosmoUrl = 'http://{s}.tile.openstreetmap.by/osmby-ru/{z}/{x}/{y}.png';
      var kosmo = new L.TileLayer(kosmoUrl, {maxZoom: 18, attribution: "Карта © Участники <a href='http://openstreetmap.by/' target='_top'>OpenStreetMap</a>"}); 
    }
    if (params.lang == 'be'){
      var kosmoUrl = 'http://{s}.tile.openstreetmap.by/osmby-be/{z}/{x}/{y}.png';
      var kosmo = new L.TileLayer(kosmoUrl, {maxZoom: 18, attribution: "Мапа © Удзельнікі <a href='http://openstreetmap.by/' target='_top'>OpenStreetMap</a>"}); 
    }
    if (params.lang == 'en'){
      var kosmoUrl = 'http://{s}.tile.openstreetmap.by/osmby-en/{z}/{x}/{y}.png';    
      var kosmo = new L.TileLayer(kosmoUrl, {maxZoom: 18, attribution: "Map data © <a href='http://openstreetmap.by/' target='_top'>OpenStreetMap</a> contributors"}); 
    }

    mmap = new L.Map('map', { 
      center: new L.LatLng(params.lat, params.lon), 
      zoom: params.zoom,
      zoomControl: params.zoomcontrol
    });

    if (params.marker){
      var marker = new L.Marker(new L.LatLng(params.mlat, params.mlon));
      mmap.addLayer(marker);
      if (params.markertext != ''){
        marker.bindPopup(params.markertext).openPopup();
      }
    }


    mmap.addLayer(kosmo);
    mmap.attributionControl.setPrefix("");

    if (params.crosshair)
      mmap.addControl(new L.Crosshair());


//--></script> 

<!-- Piwik -->  
<script type="text/javascript"> 
var pkBaseURL = (("https:" == document.location.protocol) ? "https://openstreetmap.by/piwik/" : "http://openstreetmap.by/piwik/"); 
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E")); 
</script><script type="text/javascript"> 
try { 
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1); 
piwikTracker.trackPageView(); 
piwikTracker.enableLinkTracking(); 
} catch( err ) {} 
</script><noscript><p><img src="http://openstreetmap.by/piwik/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript> 
<!-- End Piwik Tracking Code --> 
</body> 
</html> 
